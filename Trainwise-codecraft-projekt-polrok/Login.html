<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
</head>
<body>
    




<div class="login-box">
    <h2>Prihlásenie</h2>
    <form onsubmit="handleLogin(event)">
        <input type="email" id="email" placeholder="Email" required>
        <input type="password" id="password" placeholder="Heslo" required>
        <button type="submit" class="nav-btn">Prihlásiť sa</button>
    </form>
    <hr>
    <button id="google-btn" class="nav-btn" style="background-color: #4285F4; color: white;">
        Prihlásiť cez Google
    </button>
</div>



</body>


<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getAuth, signInWithEmailAndPassword, GoogleAuthProvider, signInWithPopup } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

  
  const firebaseConfig = {
    apiKey: "AIzaSyD-Ozd5hlChO_gjvhHF4P9UIVyGW03msgI",
    authDomain: "trainwise-webapp.firebaseapp.com",
    projectId: "trainwise-webapp",
    storageBucket: "trainwise-webapp.firebasestorage.app",
    messagingSenderId: "644514176585",
    appId: "1:644514176585:web:75dc6a6a11503ce7eb6998",
    measurementId: "G-W09Q3PGNJ7"
  };

  
  const app = initializeApp(firebaseConfig);
  const auth = getAuth();
  const provider = new GoogleAuthProvider();

  
  const googleBtn = document.getElementById('google-btn');
  if(googleBtn) {
    googleBtn.onclick = () => {
      signInWithPopup(auth, provider)
        .then((result) => {
          alert("Vitaj " + result.user.displayName);
          window.location.href = "index.html"; 
        })
        .catch((error) => alert(error.message));
    };
  }

  // 2. Funkcia pre klasický e-mail formulár
  window.handleLogin = (event) => {
    event.preventDefault(); // Zabráni obnoveniu stránky
    const email = document.getElementById('email').value;
    const pass = document.getElementById('password').value;

    signInWithEmailAndPassword(auth, email, pass)
      .then(() => {
        window.location.href = "index.html";
      })
      .catch((error) => alert("Chyba: " + error.message));
  };
</script>


</html>